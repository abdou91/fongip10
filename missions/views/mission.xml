<odoo>
  <data>
    <!-- explicit list view definition -->
      <record model="ir.ui.view" id="mission_view_form"> 
      <field name="name">mission.form</field>
      <field name="model">mission</field>
      <field name="arch" type="xml">
        <form string = "Missions">
          <header>
            <button modifiers="{'invisible': [['state', '=', 'done']]}" name="commencer" states="open" string="Démarrer" type="object" class="oe_highlight"/>
            <button modifiers="{'invisible': [['state', '=','done']]}" name="terminer" states="in_progress" string="Terminer" type="object" class="oe_highlight"/>
            <!--button  name="action_print_etat_liquidatif" string="Imprimer l'etat liquidatif" type="object" class="oe_highlight"/-->

            <!--button  name="run_scheduler" string="Run scheduler" type="object" class="oe_highlight"/>
            <button  name="demarrer_ou_terminer_mission" string="Demarrer ou terminer mission" type="object" class="oe_highlight"/-->
            <!--button  name="action_print_all_ordre_mission" string="Imprimer les OM" type="object" class="oe_highlight"/-->
            <field name="state" widget="statusbar" readonly="1" />
          </header>
          <sheet>
              <group col="2">
                <group>
                  <field name="numero_mission" attrs="{'invisible':[('state','=','open')]}"/>
                  <field name="type_mission"/>
                  <!--field name="mission_type_id" /-->
                  <!--field name="type_mission_name" invisible="1"/-->
                  <field name="zone" />
                  <!--field name="zone" attrs="{'invisible':[('type_mission','=','interieur')]}"/-->
                  <!--field name="objectif"/-->
                  <!--field name="motifs" widget="html"/-->
                  <!--field name="motifs"/-->
                  <field name="objet_mission"/>
                  <field name="lettre_de_mission" widget="many2many_binary"/>
                  <field name="perdium_mode_payment_id" invisible="1"/>
                  <!--field name="rapport_de_mission" widget="many2many_binary" attrs="{'invisible':[('state','=','done')]}"/-->
                </group>
                <group>
                  <field name="chef_mission"/>
                  <field name="trajet"/>
                  <field name="moyen_transport"/>
                </group>
                </group>
              <group col="2">
                <group string = "Départ">
                  <field name="date_debut"/>
                  <field name="lieu_depart"/>
                  <field name="distance" string="Distance aller - retour en Km" attrs="{'invisible':[('moyen_transport','!=','voiture')]}"/>
                </group>
                <group string = "Retour">
                  <field name="date_fin"/>
                  <field name="lieu_arrive"/>
                  <field name="nombre_de_litres" string="Nombre de litres de carburant necessaire" attrs="{'invisible':[('moyen_transport','!=','voiture')]}"/>
                </group>
                </group>
                <group col="2">
                  <group>
                    <label for="duree"/>
                    <div class="o_row">
                        <field name="duree" readonly="1"/><span>jour(s)</span>
                    </div>
                    <label for="nombre_nuites"/>
                    <div class="o_row">
                        <field name="nombre_nuites" readonly="1"/><span>Nuités</span>
                    </div>
                  </group>
                  <group>
                    <field name="observations"/>
                    <field name="total_avance" invisible="1"/>
                    <field name="total_restant" invisible="1"/>
                    <field name="total_perdieme"/>
                    <field name="cout_mission"/>
                  </group>
                </group>
                <group col="2" string="Carburant" attrs="{'invisible':[('moyen_transport','!=','voiture')]}">
                  <group>
                    <field name="dotation_carburant"/>
                  </group>
                  <group>
                    <field name="cout_carburant"/>
                    <!--field name="visible" invisible="1"/-->
                  </group>
                  <!--group string="Source">
                    <field name="source"/>
                    <field name="carte_carburant" attrs="{'invisible':[('source','=','ticket')]}" domain="[('type_carte','=','mission')]"/>
                    <field name="nombre_tickets" attrs="{'invisible':[('source','=','carte')]}"/>
                  </group-->
                </group>
                <notebook>
                  <page string="Equipe de la mission" >
                    <field name="equipe_mission" >
                      <tree editable="bottom">
                        <!--field name="mission_id" invisible="1"/>
                        <field name="numero_missionnaire" attrs="{'invisible':[('mission_id',=,'False')]}"/-->
                        <field name="employee_id"/>
                        <field name="first_name" invisible="1"/>
                        <field name="last_name" invisible="1"/>
                        <field name="titre_poste"/>
                        <field name="visible" invisible="1"/>
                        <field name="rang_hierarchique_id"/>
                        <!--field name="mission_id"/-->
                        <!--field name="type_missionnaire"/-->
                        <field name="indemnite_journaliere"/>
                        <field name="prise_en_charge"/>
                        <!--field name="visible" invisible="1"/-->
                        <!-- attrs="{'column_invisible':[('parent.visible','=',True)]}" -->
                        <field name="montant_avance" sum="Total"/> <!--  attrs="{'invisible':[('visible','=',False)]}"-->
                        <field name="montant_restant" sum="Total"/><!--  attrs="{'invisible':[('visible','=',False)]}"-->
                        <field name="montant_total" sum="Total"  /><!--  attrs="{'invisible':[('visible','=',False)]}"-->
                        <!--button 
                            string="Imprimer odre de mission"
                            name="action_print_ordre_mission" 
                            type="object"
                            class="oe_highlight"
                        /-->
                      </tree>
                    </field>
                  </page>
                  <page string="Les véhicules de la mission" attrs="{'invisible':[('moyen_transport','!=','voiture')]}">
                    <field name="vehicule_ids" >
                      <tree editable="bottom">
                        <!--field name="vehicle_id" domain="[('service_affectation','=','Services Généraux'),('status','=','disponible')]"/-->
                        <field name="vehicle_id"/>
                        <!--field name="driver_id"/-->
                        <!--field name="conducteur"/-->
                        <field name="source"/>
                        <field name="carte_carburant" attrs="{'invisible':[('source','=','ticket')]}"/>
                        <field name="nombre_tickets" attrs="{'invisible':[('source','=','carte')]}"/>
                        <field name="liter" sum="Total"/>
                        <field name="price_per_liter"/>
                        <field name="amount" sum="Total"/>
                      </tree>
                    </field>
                  </page>
                  <!--page string='Carburant'>
                    <group col="2">
                    <group>
                      <field name="prix_au_litre"/>
                      <field name="cout_carburant"/>
                      <field name="dotation_carburant"/>
                    </group>
                    <group>
                      <field name="source"/>
                      <field name="carte_carburant" attrs="{'invisible':[('source','=','ticket')]}" domain="[('type_carte','=','mission')]"/>
                      <field name="nombre_tickets" attrs="{'invisible':[('source','=','carte')]}"/>
                    </group>
                    </group>
                    <field name='bon_carburant_ids'>
                      <tree editable='bottom' create="false" delete="false">
                        <field name='vehicle_id' readonly="1"/>
                        <field name='liter' sum="Total"/>
                        <field name='price_per_liter' readonly="1"/>
                        <field name='carte_carburant' invisible="1"/>
                        <field name='amount' sum="Total"/>
                      </tree>
                    </field>
                  </page-->
                </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record id='mission_view_tree' model='ir.ui.view'>
      <field name="name">mission.tree</field>
      <field name="model">mission</field>
      <field name="arch" type="xml">
          <tree>
            <field name="numero_mission"/>
            <field name="trajet"/>
            <field name="chef_mission"/>
            <field name="type_mission"/>
            <field name="date_debut"/>
            <field name="date_fin" />
            <field name="state" />
          </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="action_create_mission">
      <field name="name">Missions</field>
      <field name="res_model">mission</field>
      <field name="view_id" ref="mission_view_tree"/>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Cliquez ici pour creer une mission
        </p>
      </field>
    </record>

    <!--***************Type de mission***************** -->
    <!--record id='mission_type_view_tree' model='ir.ui.view'>
      <field name="name">mission.type.tree</field>
      <field name="model">mission.type</field>
      <field name="arch" type="xml">
        <tree >
          <field name="name"/>
          <field name="payment_perdium"/>
          <field name="pourcentage"/>
        </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="create_mission_type">
      <field name="name">Type de mission</field>
      <field name="res_model">mission.type</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Cliquez ici pour creer un nouveau type mission
        </p>
      </field>
    </record>
    <record model="ir.ui.view" id="mission_type_view_form"> 
      <field name="name">mission.type.form</field>
      <field name="model">mission.type</field>
      <field name="arch" type="xml">
        <form string = "Type mission">
          <sheet>
            <group col="2">
              <group>
                <field name="name"/>
              </group>
              <group>
                <field name="payment_perdium"/>
              <field name="pourcentage" attrs="{'invisible':[('payment_perdium','=','paiement_total')]}"/>
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record-->
    <!--*************Type mission************** -->
    <!--***************Perdium mode payment***************** -->
    <record id='perdium_mode_payment_view_tree' model='ir.ui.view'>
      <field name="name">perdium.mode.payment.tree</field>
      <field name="model">perdium.mode.payment</field>
      <field name="arch" type="xml">
        <tree >
          <field name="type_mission"/>
          <field name="mode_payment"/>
          <field name="pourcentage"/>
        </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="create_perdium_mode_payment">
      <field name="name">Perdium mode payment</field>
      <field name="res_model">perdium.mode.payment</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Cliquez ici pour creer un nouveau mode de paiement du perdium
        </p>
      </field>
    </record>
    <record model="ir.ui.view" id="perdium_mode_payment_view_form"> 
      <field name="name">perdium.mode.payment.form</field>
      <field name="model">perdium.mode.payment</field>
      <field name="arch" type="xml">
        <form string = "Mode de paiement">
          <sheet>
            <group col="2">
              <group>
                <field name="type_mission"/>
              </group>
              <group>
                <field name="mode_payment"/>
              <field name="pourcentage" attrs="{'invisible':[('mode_payment','=','paiement_total')]}"/>
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>
    <!--***************Zone***************** -->
    <record id='mission_zone_view_tree' model='ir.ui.view'>
      <field name="name">mission.zone.tree</field>
      <field name="model">mission.zone</field>
      <field name="arch" type="xml">
        <tree >
          <field name="name"/>
          <field name="description"/>
        </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="create_zone">
      <field name="name">Zone</field>
      <field name="res_model">mission.zone</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Cliquez ici pour creer une nouvelle zone
        </p>
      </field>
    </record>
    <!--*************Zone************** -->
    <!--*********Indemnite journaliere************* -->
    <record id='mission_indeminite_journaliere_view_tree' model='ir.ui.view'>
      <field name="name">mission.indemnite.journaliere.tree</field>
      <field name="model">mission.indemnite.journaliere</field>
      <field name="arch" type="xml">
        <tree >
          <field name="zone"/>
          <!--field name="type_mission"/-->
          <field name="rang_hierarchique_id"/>
          <!--field name="type_missionnaire"/-->
          <field name="montant"/>
        </tree>
      </field>
    </record>

    <record model="ir.actions.act_window" id="create_indemnite_journaliere">
      <field name="name">Indemnite journaliere</field>
      <field name="res_model">mission.indemnite.journaliere</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
        <p class="oe_view_nocontent_create">
          Cliquez ici pour creer une nouvelle indeminité journaliere
        </p>
      </field>
    </record>

    <!-- Top menu item -->
    
    <menuitem name="Missions" 
    		  id="menu_root"
    		  web_icon="missions,static/description/icon.png"
    		  groups="group_moyens_genereaux"
    		  />
    <menuitem name="Missions"
            id="menu_missions"
            parent="menu_root"
            sequence="10"
            groups="group_moyens_genereaux"
            />
    <menuitem name="Missions"
            id="menu_list_missions"
            parent="menu_missions"
            action="action_create_mission"
            sequence="10"
            groups="group_moyens_genereaux"
            />
    <menuitem name="Configurations"
            id="menu_configurations"
            parent="menu_root"
            sequence="70"
            groups="group_moyens_genereaux"
            />
    <!--menuitem name="Types mission" 
                id="menu_type_mission" 
                parent="menu_configurations" 
                action="create_mission_type"
                sequence="5"
        /-->
    <menuitem name="Mode de paiement des perdiums" 
                id="menu_perdium_mode_payment" 
                parent="menu_configurations" 
                action="create_perdium_mode_payment"
                sequence="5"
        />
    <menuitem name="Zones" 
                id="menu_zone" 
                parent="menu_configurations" 
                action="create_zone"
                sequence="10"
        />
    <menuitem name="indeminité journalière" 
                id="menu_indeminite_journaliere" 
                parent="menu_configurations" 
                action="create_indemnite_journaliere"
                sequence="20"
        />
    
    <!-- menu categories -->
    <!--menuitem name="Fleet" id="fleet.menu_root" sequence="115" /-->
    <!--menuitem name="Parc Automobile"
               id="menu_fongip_parc_automobile_root"
               web_icon="fongip_parc_automobile,static/description/icon.png"
               sequence="25"/-->
    
  </data>
</odoo>